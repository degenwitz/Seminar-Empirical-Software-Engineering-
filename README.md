# Seminar Project Code Comments and Code Smells

This is the git-rpoject for my seminar project on the correlation between code comments and smell.

It only contains the gathered data, not the tools to optain the data. This is because it requires system dependent setup and I don't own the licence to these tools.

The one tool that is included is my Gradle project to gather the number of comments in each file of a project. It can be found under /number_of_comments

The figure folder contains all the figures generated by the regression.ipynb script.

Each of the project-folders (flow, guava, guice, hadoop, eclipse.platform, spark) contains 

1. 5 data file:
  * comments_in_code.csv
  * output.txt
  * pmd_analysis.csv
  * sonar_analysis.csv	
  * loc_analysis.csv
2. 1 agregation files
  * data.csv
3. Many regresseion-result files.

## data files

### comments_in_code.csv
This csv contains the result of the number_of_comments java application.
For each java-file it lists:
1. Class = The full relative file-name
2. Number of commentsComment = The number of total comments
3. Number of line comments = The number of comments that are of the form: //coment here
4. Number of Block comments = The number of comments that are of the form: /* comment here */
5. Number of Javadoc comments = The number of comments that are formatted like a java-doc comment
6. Number of Licence comments = The number of comments that appear before package-declaration
7. Number of comments in methode = The number of comments that appear after the opening of a method-bracket '{' and before closing
8. Number of method comments = The number of comments that appear right before a method-declaration
9. Number of class comments = The number of comments that appear right before a class-declaration

### output.txt
This is the raw output from the the pmd analysis on this project, stored to file on the rules from /pmd_rules.xml.

### pmd_analysis.csv
This file presents the results from output.txt in a more readable way, as a csv.

This file contains a list of all java files that break pmd-rules, specified in /pmd_rules.xml
For each of those files it lists:
1. class = The full relative file-name
2. smell = the name of the smell, as given in the pmd_rules.xml
3. description = the rest of the output, given in the output.txt

### sonar_analysis.csv
This file contains a list of all java files that break sonarqubes rule of the type "codesmell"
For each of those files it lists:
1. class = The full relative file-name
2. smell = The name of the sonar-qube rule that was broken
3. description = a short desciption that sonarqube gives for this rule

### loc_analysis.csv
This file contains the Output from SonarQube for the lines of code for each class.
For each of those files it lists:
1. class = The full relative file-name
2. loc = The number of lines of code in that file, as calculated by SonarQube

## agregation files

### data.csv
This file agregates all the data from the data-files into one csv file.
It is generated by running the /data_colletction.ipynb script
For each file where the lines of codes are known it lists:
1. class = The full relative file-name
2. loc = The number of lines of code in that file, as calculated by SonarQube
3. Number [Comment type] = The Amount of comments of that Type, as defined in comments_in_code.csv
4. pmd_[RuleName] = The number of times that the PMD rule [RuleName] has been broken in this file (most of the time 0 or 1, some rules can be broken multiple times)
4. sonar_[RuleName] = The number of times that the SonarQube rule [RuleName] has been broken in this file (most of the time 0 or 1, some rules can be broken multiple times)

## regressions
The other csv-files are the calculated regressions. it was generated by running the /regression.ipynb script.
They follow the naming convention:
[Comment-type]_[Rule-category].csv or [Comment-type]_[Rule-category]=loc.csv
where:
1. Comment-type = As defined in comments_in_code.csv
2. Rule-category = Either Sonar, PMD, Sum
If it ends in the postfix '=loc', this means that not the number of comments of that type have been used, but the number of comments divided by the lines of code

The Sonar and PMD rule-categories contain the corelations for rules from these sources.
The 'Sum' rule category contains the corelations for three factors: The total sum of rules broken, the sum of Sonar rules broken and the sum of PMD rules broken.

All regression files contain the same fields, calculated using a Negative Binomial Model:
1. The name of the rule
2. cor = the calculated corelation
3. p = the calculated p-value
4. ratio = the alpha value used in the Negative Binomial Model
